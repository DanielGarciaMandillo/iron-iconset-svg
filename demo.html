<!doctype html>
<!--
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<html>
<head>

  <title>core-iconset-svg</title>
  <script src="../platform/platform.js"></script>
  <link rel="import" href="core-icons.html">
  <style shim-shadowdom>
    svg-icon-demo {
      transition: all 0.2s;
      -webkit-transition: all 0.2s;
    }

    svg-icon-demo:hover {
      -webkit-filter: drop-shadow( 1px 1px 1px #333 );
      filter: drop-shadow( 1px 1px 1px #333 );
    }
    h2 {
      text-transform: capitalize;
    }
    .set {
      margin: 100px 0;
      border-bottom: 1px solid black;
    }
    .set:nth-of-type(4n-3) svg-icon-demo::shadow > svg:not(rect) {
      fill: #D23F31;
    }
    .set:nth-of-type(4n-2) svg-icon-demo::shadow > svg:not(rect) {
      fill: #FDD835;
    }
    .set:nth-of-type(4n-1) svg-icon-demo::shadow > svg:not(rect) {
      fill: #0D904F;
    }
    .set:nth-of-type(4n) svg-icon-demo::shadow > svg:not(rect) {
      fill: #3B78E7;
    }
    body {
      font-family: 'Helvetica Neue', Helvetica, Arial;
    }
  </style>
</head>
<body unresolved>

  <!-- 
    Create an element that uses an iconset to display an icon.
    By using iconset, the element can allow the set of available icons to be
    easily changed by the user.

    Here we're using the converntion 'iconset:icon' to specify a particular
    iconset and an icon name within that set.
   -->
  <polymer-element name="svg-icon-demo" attributes="icon size">

    <template>
      <style>
        :host {
          display: inline-block;
          vertical-align: middle;
          margin: 2px;
        }
      </style>
      <core-iconset id="meta"></core-iconset>
    </template>

    <script>

      Polymer('svg-icon-demo', {
        size: 24,
        iconChanged: function() {
          if (!this.icon) {
            return;
          }
          var parts = this.icon.split(':');
          var icon = parts.pop();
          // find the iconSet for the name given via the icon property
          var iconset = this.$.meta.byId(parts.pop());
          this.style.height = this.style.width = this.size + 'px';
          if (iconset) {
            iconset.applyIcon(this, icon);
          }
        }

      });

    </script>

  </polymer-element>

  <!-- Now some icons using our iconset -->
  <div id="demo">
    <template repeat="{{ }}">
      <div class="set">
        <h2>{{set}}</h2>
        <template repeat="{{ icon in icons }}">
          <svg-icon-demo icon="{{ set }}:{{ icon }}"></svg-icon-demo>
        </template>
      </div>
    </template>
  </div>

  <core-meta id="meta" type="iconset"></core-meta>
  <script>
    addEventListener('polymer-ready', function() {
      var meta = document.querySelector('#meta')
      var template = document.querySelector('#demo > template');
      var iconsets = meta.metaArray;
      var model = iconsets.map(function(ic) {
        return {set: ic.id, icons: ic.iconNames};
      });
      template.model = model;
      template.bindingDelegate = new PolymerExpressions();
    });
  </script>
</body>
</html>
